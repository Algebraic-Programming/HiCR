pages:
  image: registry.gitlab.huaweirc.ch/zrc-von-neumann-lab/runtime-system-innovations/hicr/docs:latest
  tags:
  - docker
  - tiny 
  script:
  - git submodule init && git submodule update
  - tools/check-style.sh check
  - make -C docs
  - mv docs/build/html public
  artifacts:
    paths:
    - public
  only:
  - master
  - merge_requests

test:
  image: registry.gitlab.huaweirc.ch/zrc-von-neumann-lab/runtime-system-innovations/hicr/buildenv:latest
  tags:
  - docker
  - high-core 
  - x86
  script:
  - mkdir build
  - meson setup build -Dtest=true
  - meson compile -C build
  - meson test -C build 
  only:
  - master
  - merge_requests